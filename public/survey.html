<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FriendFinder</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" />
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../styles/style3.css" />

    <!-- chosen jquery pluggin that makes long, unwieldy select boxes much more user friendly-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <h2>Movie Generator</h2>
        <hr>
        <h3><strong>About You</strong></h3>
        <p>Please answer all questions in the required field</p>
        <h4>Name (Required)</h4>
        <input type="text" name="" id="name" class="form-control" required>

        <section id="friend-form">
            <section class="form-group">
                <h3>Question 1</h3>
                <label for="item1" class="control-label">
                    Pick a Genre?
                </label>
                <div>
                    <select class="form-control" id="item1">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Horror)</option>
                        <option value="2">2 (Comedy)</option>
                        <option value="3">3 (Action)</option>
                        <option value="4">4 (Documentary)</option>
                        <option value="5">5 (Sci-Fi)</option>
                        <optin value="6">6 (Crime)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 2</h3>
                <label for="item2" class="control-label">
                    What is your favorite movie rating?
                </label>
                <div>
                    <select class="form-control" id="item2">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1(Pg 13)</option>
                        <option value="2">2(R)</option>
                        <option value="3">3(G)</option>
                        <option value="4">4(MA)</option>
                        <option value="5">5(PG)</option>

                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 3</h3>
                <label for="item3" class="control-label">
                    Pick a Runtime?
                </label>
                <div>
                    <select class="form-control" id="item3">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (60 minutes)</option>
                        <option value="2">2 (90 minutes)</option>
                        <option value="3">3 (105 minutes)</option>
                        <option value="4">4 (120 minutes)</option>

                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 2</h3>
                <label for="item2" class="control-label">
                    What is your favorite movie rating?
                </label>
                <div>
                    <select class="form-control" id="item2">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1(Pg 13)</option>
                        <option value="2">2(R)</option>
                        <option value="3">3(G)</option>
                        <option value="4">4(MA)</option>
                        <option value="5">5(PG)</option>

                        <section class="form-group">
                            <h3>Question 4</h3>
                            <label for="item4" class="control-label">
                                Pick a Decade(s)
                            </label>
                            <div>
                                <select class="form-control" id="item4">
                                    <option value="" selected disabled>Choose</option>
                                    <option value="1">1 (60's)</option>
                                    <option value="2">2 (70's)</option>
                                    <option value="3">3 (80's)</option>
                                    <option value="4">4 (90's)</option>
                                    <option value="5">5 (2000's)</option>
                                </select>
                            </div>
                        </section>
                        <section class="form-group">
                            <h3>Question 5</h3>
                            <label for="item5" class="control-label">
                                Do you like sitting through a movie that longer than two hours?
                            </label>
                            <div>
                                <select class="form-control" id="item5">
                                    <option value="" selected disabled>Choose</option>
                                    <option value="1">1 (Yes)</option>
                                    <option value="2">2 (No)</option>
                                </select>
                            </div>
                        </section>
                        <section class="form-group">
                            <h3>Question 6</h3>
                            <label for="item6" class="control-label">
                                Pick a Language?
                            </label>
                            <div>
                                <select class="form-control" id="item6">
                                    <option value="" selected disabled>Choose</option>
                                    <option value="1">1 (English)</option>
                                    <option value="2">2 (Spanish)</option>
                                    <option value="3">3 (Italian)</option>
                                    <option value="4">4 (German)</option>
                                    <option value="5">5 (French)</option>
                                </select>
                            </div>
                        </section>
            </section>

        </section>
        </section>
        <!-- Modal -->
        <div id="resultsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- content stored inside modal -->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h2 class="modal-title"><strong>Here is your result</strong></h2>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchName"></h2>
                        <img id="matchImg"
                            src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">close</button>
                    </div>
                </div>
            </div>
        </div>


        <button type="submit" class="btn btn-danger btn-lg btn-block" id="submit">Submit</button>
        <br>

        <footer class="footer">
            <p>
                <a href="https://github.com/jb47472/Bust-A-Block">GitHub Repo</a>
            </p>
        </footer>
    </div>

    <script type="text/javascript">
        /// chosen css
        var config = {
            ".chosen-select": {},
            ".chosen-select-deselect": { allow_single_deselect: true },
            ".chosen-select-no-single": { disable_search_threshold: 10 },
            ".chosen-select-no-results": { no_results_text: " nothing found!" },
            ".chosen-select-width": { width: "95%" }

        };
        for (var selector in config) {
            $(selector).chosen(config[selector]);
        }

        //capturing the form input with the submitbutton
        $("#submit").on("click", function () {

            //validation for the form
            function validateForm() {
                var isValid = true;
                $(".form-control").each(function () {
                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });

                $(".chosen-select").each(function () {

                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });
                return isValid;
            }

            //creating an object for the user data if the fields are filled
            if (validateForm()) {

                var userData = {
                    name: $("#name").val(),
                    photo: $("photo").val(),
                    scores: [
                        $("#item1").val(),
                        $("#item2").val(),
                        $("#item3").val(),
                        $("#item4").val(),
                        $("#item5").val(),
                        $("#item6").val(),
                        $("#item7").val(),
                    ]
                };

                $.post("/api/movies")
                    .then(window.location.href = 'results.html');
                //grab the URL 0f the website
                // var currentURL = window.location.origin;

                // $.post(currentURL + "/api/movies", userData, function (data) {

                //     // grab image of the match and display
                //     $("#matchName").text(data.name);
                //     $("#matchImg").attr("src", data.photo);

                //     $("#resultsModal").modal("toggle");

                // });
            }
            else {
                alert("please fill out all of the fields before hitting submit");
            }
            return false;
        });

    </script>
</body>

</html>